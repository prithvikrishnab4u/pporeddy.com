{{ $goatcounterUrl := printf "https://pporeddy.goatcounter.com/counter/%s.json" (.RelPermalink | urlquery) }}
<span class="goatcounter-views">
    <script>
        var r = new XMLHttpRequest();
        r.addEventListener('load', function () {
            var data = JSON.parse(this.responseText);
            if (data && data.count_unique) {
                // Display the unique visitor count
                document.getElementById('gc-{{ .File.UniqueID }}').innerText = data.count_unique + ' views';
            } else {
                // Optionally hide if no count is returned
                document.getElementById('gc-{{ .File.UniqueID }}').parentElement.style.display = 'none';
            }
        })
        r.open('GET', '{{ $goatcounterUrl }}')
        r.send()
    </script>
    <span id="gc-{{ .File.UniqueID }}" title="Page views">0</span>
</span>