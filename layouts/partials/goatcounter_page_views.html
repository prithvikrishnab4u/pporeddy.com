{{/* This partial fetches the count for the current page and displays it */}}
<span class="page-view-counter">
    <span id="page-views-{{ .File.UniqueID }}">...</span> views
</span>

<script>
    var statsElementId = "page-views-{{ .File.UniqueID }}";
    var path = "{{ .RelPermalink }}";
    var r = new XMLHttpRequest;

    r.addEventListener("load", function () {
        var stats = JSON.parse(this.responseText);

        // CORRECTED CONDITIONAL CHECK: Ensure stats object exists and count is not 0/undefined/null
        if (stats && stats.count_unique > 0) {
            document.getElementById(statsElementId).innerText = stats.count_unique.toLocaleString();
        } else {
            // Hide the counter if no data is found or the count is 0
            document.querySelector(".page-view-counter").style.display = "none";
        }
    });

    // Using your correct subdomain: ppporeddy
    r.open("GET", "https://pporeddy.goatcounter.com/counter/" + encodeURIComponent(path) + ".json");
    r.send();
</script>